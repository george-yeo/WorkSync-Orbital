{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yi Tao\\\\Documents\\\\GitHub\\\\WorkSync-Orbital\\\\frontend\\\\src\\\\context\\\\SocketContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useReducer, useEffect, useState } from 'react';\nimport { useAuthContext } from '../hooks/useAuthContext';\nimport io from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SocketContext = /*#__PURE__*/createContext();\nexport const SocketContextProvider = ({\n  children\n}) => {\n  _s();\n  const [socket, setSocket] = useState(null);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const {\n    user\n  } = useAuthContext();\n  useEffect(() => {\n    if (user) {\n      const socket = io({\n        query: {\n          userId: user._id\n        }\n      });\n      console.log(\"CONNECTING SOCKET\");\n      setSocket(socket);\n      socket.on(\"getOnlineUsers\", users => {\n        console.log(users);\n        setOnlineUsers(users);\n      });\n      return () => socket.close();\n    } else {\n      if (socket) {\n        socket.close();\n        setSocket(null);\n      }\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(SocketContext.Provider, {\n    value: {\n      socket,\n      onlineUsers\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n_s(SocketContextProvider, \"NlrE9hUrUIp9YxuLzO4IOPD+0pQ=\", false, function () {\n  return [useAuthContext];\n});\n_c = SocketContextProvider;\nvar _c;\n$RefreshReg$(_c, \"SocketContextProvider\");","map":{"version":3,"names":["createContext","useReducer","useEffect","useState","useAuthContext","io","jsxDEV","_jsxDEV","SocketContext","SocketContextProvider","children","_s","socket","setSocket","onlineUsers","setOnlineUsers","user","query","userId","_id","console","log","on","users","close","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Yi Tao/Documents/GitHub/WorkSync-Orbital/frontend/src/context/SocketContext.js"],"sourcesContent":["import { createContext, useReducer, useEffect, useState } from 'react'\r\nimport { useAuthContext } from '../hooks/useAuthContext'\r\nimport io from \"socket.io-client\"\r\n\r\nexport const SocketContext = createContext()\r\n\r\nexport const SocketContextProvider = ({ children }) => {\r\n  const [socket, setSocket] = useState(null)\r\n  const [onlineUsers, setOnlineUsers] = useState([])\r\n  const { user } = useAuthContext()\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      const socket = io({\r\n        query: {\r\n          userId: user._id\r\n        }\r\n      })\r\n\r\n      console.log(\"CONNECTING SOCKET\")\r\n\r\n      setSocket(socket)\r\n\r\n      socket.on(\"getOnlineUsers\", (users) => {\r\n        console.log(users)\r\n        setOnlineUsers(users)\r\n      })\r\n\r\n      return () => socket.close()\r\n    } else {\r\n      if (socket) {\r\n        socket.close()\r\n        setSocket(null)\r\n      }\r\n    }\r\n  }, [user])\r\n  \r\n  return (\r\n    <SocketContext.Provider value={{ socket, onlineUsers }}>\r\n      { children }\r\n    </SocketContext.Provider>\r\n  )\r\n}\r\n"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACtE,SAASC,cAAc,QAAQ,yBAAyB;AACxD,OAAOC,EAAE,MAAM,kBAAkB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEjC,OAAO,MAAMC,aAAa,gBAAGR,aAAa,CAAC,CAAC;AAE5C,OAAO,MAAMS,qBAAqB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACrD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACW,WAAW,EAAEC,cAAc,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM;IAAEa;EAAK,CAAC,GAAGZ,cAAc,CAAC,CAAC;EAEjCF,SAAS,CAAC,MAAM;IACd,IAAIc,IAAI,EAAE;MACR,MAAMJ,MAAM,GAAGP,EAAE,CAAC;QAChBY,KAAK,EAAE;UACLC,MAAM,EAAEF,IAAI,CAACG;QACf;MACF,CAAC,CAAC;MAEFC,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;MAEhCR,SAAS,CAACD,MAAM,CAAC;MAEjBA,MAAM,CAACU,EAAE,CAAC,gBAAgB,EAAGC,KAAK,IAAK;QACrCH,OAAO,CAACC,GAAG,CAACE,KAAK,CAAC;QAClBR,cAAc,CAACQ,KAAK,CAAC;MACvB,CAAC,CAAC;MAEF,OAAO,MAAMX,MAAM,CAACY,KAAK,CAAC,CAAC;IAC7B,CAAC,MAAM;MACL,IAAIZ,MAAM,EAAE;QACVA,MAAM,CAACY,KAAK,CAAC,CAAC;QACdX,SAAS,CAAC,IAAI,CAAC;MACjB;IACF;EACF,CAAC,EAAE,CAACG,IAAI,CAAC,CAAC;EAEV,oBACET,OAAA,CAACC,aAAa,CAACiB,QAAQ;IAACC,KAAK,EAAE;MAAEd,MAAM;MAAEE;IAAY,CAAE;IAAAJ,QAAA,EACnDA;EAAQ;IAAAiB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACY,CAAC;AAE7B,CAAC;AAAAnB,EAAA,CApCYF,qBAAqB;EAAA,QAGfL,cAAc;AAAA;AAAA2B,EAAA,GAHpBtB,qBAAqB;AAAA,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}