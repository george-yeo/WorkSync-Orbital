{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yi Tao\\\\Documents\\\\GitHub\\\\WorkSync-Orbital\\\\frontend\\\\src\\\\components\\\\group-page\\\\Member.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useGroupContext } from \"../../hooks/useGroupContext\";\nimport { useGroupPageContext } from \"../../hooks/useGroupPageContext\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport Modal from 'react-modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Member = ({\n  group,\n  member,\n  role,\n  canManage,\n  isInvite,\n  handleRevokeInviteSubmit,\n  isRequest,\n  handleApproveRequest,\n  handleRejectRequest,\n  isSearchInvite,\n  handleAddUserSubmit\n}) => {\n  _s();\n  const {\n    user\n  } = useAuthContext();\n  const {\n    groups,\n    dispatch\n  } = useGroupContext();\n  const groupPageContext = useGroupPageContext();\n  const [isKicking, setIsKicking] = useState(false);\n  const handleOnKick = () => {\n    setIsKicking(true);\n  };\n\n  // Handle Remove User Confirmation\n  const handleRemoveUserSubmit = async () => {\n    if (!user) return;\n    try {\n      // Remove the user from the group\n      const responseRemove = await fetch(`/api/group/remove/` + group._id, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user.token}`\n        },\n        body: JSON.stringify({\n          user_id: member._id\n        })\n      });\n      const updatedGroup = await responseRemove.json();\n      if (responseRemove.ok) {\n        dispatch({\n          type: 'UPDATE_GROUP',\n          payload: updatedGroup\n        });\n        groupPageContext.dispatch({\n          type: 'SET_GROUP',\n          payload: updatedGroup\n        });\n      } else {\n        console.error(\"Error removing user from group:\", updatedGroup.error);\n      }\n    } catch (error) {\n      console.error(\"Failed to remove user from group:\", error);\n    }\n  };\n  let actionsContainer;\n  if (isInvite) {\n    actionsContainer = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"kick-actions\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"delete-btn\",\n        onClick: () => handleRevokeInviteSubmit(member._id),\n        children: \"Revoke\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this);\n  } else if (isRequest) {\n    actionsContainer = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"kick-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-btn\",\n        onClick: () => handleApproveRequest(member),\n        children: \"Accept\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"delete-btn\",\n        onClick: () => handleRejectRequest(member),\n        children: \"Deny\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this);\n  } else if (isSearchInvite) {\n    actionsContainer = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"kick-actions\",\n      children: [group.pendingID.findIndex(u => u._id == member._id) < 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-btn\",\n        onClick: () => handleAddUserSubmit(member._id),\n        children: \"Invite\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 79\n      }, this), group.pendingID.findIndex(u => u._id == member._id) >= 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Invite sent!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 80\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this);\n  } else {\n    actionsContainer = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"kick-actions\",\n      children: [canManage && member._id != user._id && !isKicking && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"remove-btn\",\n        onClick: handleOnKick,\n        children: \"Kick\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 71\n      }, this), isKicking && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-btn\",\n        onClick: handleRemoveUserSubmit,\n        children: \"Yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 31\n      }, this), isKicking && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"remove-btn\",\n        onClick: () => setIsKicking(false),\n        children: \"No\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    className: \"member\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"member-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: `data:image/jpeg;base64, ${member.profilePic}`,\n        alt: \"Profile Picture\",\n        className: \"member-pic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), isKicking && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"member-name\",\n        children: [\"Confirm kick - \", member.displayname + \" @\" + member.username + (role ? \" - \" + role : \"\"), \"?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 31\n      }, this), !isKicking && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"member-name\",\n        children: member.displayname + \" @\" + member.username + (role ? \" - \" + role : \"\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 32\n      }, this), actionsContainer]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n_s(Member, \"uKWRTC0XSxPEKEwZ8CsgJD4x1JY=\", false, function () {\n  return [useAuthContext, useGroupContext, useGroupPageContext];\n});\n_c = Member;\nexport default Member;\nvar _c;\n$RefreshReg$(_c, \"Member\");","map":{"version":3,"names":["useEffect","useState","useParams","useGroupContext","useGroupPageContext","useAuthContext","Modal","jsxDEV","_jsxDEV","Member","group","member","role","canManage","isInvite","handleRevokeInviteSubmit","isRequest","handleApproveRequest","handleRejectRequest","isSearchInvite","handleAddUserSubmit","_s","user","groups","dispatch","groupPageContext","isKicking","setIsKicking","handleOnKick","handleRemoveUserSubmit","responseRemove","fetch","_id","method","headers","token","body","JSON","stringify","user_id","updatedGroup","json","ok","type","payload","console","error","actionsContainer","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","pendingID","findIndex","u","src","profilePic","alt","displayname","username","_c","$RefreshReg$"],"sources":["C:/Users/Yi Tao/Documents/GitHub/WorkSync-Orbital/frontend/src/components/group-page/Member.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useGroupContext } from \"../../hooks/useGroupContext\";\r\nimport { useGroupPageContext } from \"../../hooks/useGroupPageContext\";\r\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\r\nimport Modal from 'react-modal';\r\n\r\nconst Member = ({ group, member, role, canManage, isInvite, handleRevokeInviteSubmit, isRequest, handleApproveRequest, handleRejectRequest, isSearchInvite, handleAddUserSubmit }) => {\r\n    const { user } = useAuthContext();\r\n    const { groups, dispatch } = useGroupContext();\r\n    const groupPageContext = useGroupPageContext();\r\n    const [isKicking, setIsKicking] = useState(false)\r\n\r\n    const handleOnKick = () => {\r\n        setIsKicking(true)\r\n    }\r\n\r\n    // Handle Remove User Confirmation\r\n    const handleRemoveUserSubmit = async () => {\r\n        if (!user) return;\r\n\r\n        try {\r\n            // Remove the user from the group\r\n            const responseRemove = await fetch(`/api/group/remove/` + group._id, {\r\n                method: 'PATCH',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${user.token}`\r\n                },\r\n                body: JSON.stringify({ user_id: member._id })\r\n            });\r\n            \r\n            const updatedGroup = await responseRemove.json();\r\n            if (responseRemove.ok) {\r\n                dispatch({ type: 'UPDATE_GROUP', payload: updatedGroup });\r\n                groupPageContext.dispatch({ type: 'SET_GROUP', payload: updatedGroup });\r\n            } else {\r\n                console.error(\"Error removing user from group:\", updatedGroup.error);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to remove user from group:\", error);\r\n        }\r\n    };\r\n\r\n    let actionsContainer\r\n\r\n    if (isInvite) {\r\n        actionsContainer = (\r\n            <div className=\"kick-actions\">\r\n                <button className=\"delete-btn\" onClick={() => handleRevokeInviteSubmit(member._id)}>Revoke</button>\r\n            </div>\r\n        )\r\n    } else if (isRequest) {\r\n        actionsContainer = (\r\n            <div className=\"kick-actions\">\r\n                <button className=\"add-btn\" onClick={() => handleApproveRequest(member)}>Accept</button>\r\n                <button className=\"delete-btn\" onClick={() => handleRejectRequest(member)}>Deny</button>\r\n            </div>\r\n        )\r\n    } else if (isSearchInvite) {\r\n        actionsContainer = (\r\n            <div className=\"kick-actions\">\r\n                {group.pendingID.findIndex((u) => u._id == member._id) < 0 && <button className=\"add-btn\" onClick={() => handleAddUserSubmit(member._id)}>Invite</button>}\r\n                {group.pendingID.findIndex((u) => u._id == member._id) >= 0 && <div>Invite sent!</div>}\r\n            </div>\r\n        )\r\n    } else {\r\n        actionsContainer = (\r\n            <div className=\"kick-actions\">\r\n                {canManage && member._id != user._id && !isKicking && <button className=\"remove-btn\" onClick={handleOnKick}>Kick</button>}\r\n                {isKicking && <button className=\"add-btn\" onClick={handleRemoveUserSubmit}>Yes</button>}\r\n                {isKicking && <button className=\"remove-btn\" onClick={()=>setIsKicking(false)}>No</button>}\r\n            </div>\r\n        )\r\n    }\r\n    \r\n    return (\r\n        <li className=\"member\">\r\n            <div className=\"member-details\">\r\n                <img\r\n                src= {`data:image/jpeg;base64, ${member.profilePic}`}  \r\n                alt=\"Profile Picture\"\r\n                className=\"member-pic\"\r\n                />\r\n                {isKicking && <div className=\"member-name\">Confirm kick - {member.displayname + \" @\" + member.username + (role ? \" - \" + role : \"\")}?</div>}\r\n                {!isKicking && <div className=\"member-name\">{member.displayname + \" @\" + member.username + (role ? \" - \" + role : \"\")}</div>}\r\n                {actionsContainer}\r\n            </div>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default Member"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}