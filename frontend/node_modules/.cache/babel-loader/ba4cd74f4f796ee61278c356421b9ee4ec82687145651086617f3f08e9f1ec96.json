{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yi Tao\\\\Documents\\\\GitHub\\\\WorkSync-Orbital\\\\frontend\\\\src\\\\components\\\\GroupItem.js\",\n  _s = $RefreshSig$();\nimport { Link } from 'react-router-dom';\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport { useGroupContext } from \"../hooks/useGroupContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GroupItem = ({\n  group\n}) => {\n  _s();\n  const {\n    user\n  } = useAuthContext();\n  const {\n    groups,\n    dispatch\n  } = useGroupContext();\n\n  // Function to handle request to join a group\n  const handleRequestJoin = async () => {\n    if (!user) return;\n    try {\n      const response = await fetch(`/api/group/join/${group._id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user.token}`\n        }\n      });\n      const json = await response.json();\n      if (response.ok) {\n        const updatedGroup = structuredClone(group);\n        updatedGroup.requestID = [...updatedGroup.requestID, user];\n        dispatch({\n          type: 'UPDATE_GROUP',\n          payload: updatedGroup\n        });\n        dispatch({\n          type: 'CREATE_GROUP',\n          payload: updatedGroup\n        });\n      } else {\n        console.error(\"Failed to send request to join group:\", json.error);\n      }\n    } catch (error) {\n      console.error(\"Failed to send request to join group:\", error);\n    }\n  };\n\n  // Function to cancel request to join a group\n  const handleCancelRequest = async () => {\n    if (!user) return;\n    try {\n      const response = await fetch(`/api/group/cancel/${group._id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user.token}`\n        }\n      });\n      const json = await response.json();\n      if (response.ok) {\n        const updatedGroup = structuredClone(group);\n        updatedGroup.requestID = group.requestID.filter(u => u._id !== user._id);\n        dispatch({\n          type: 'UPDATE_GROUP',\n          payload: updatedGroup\n        });\n        dispatch({\n          type: 'DELETE_GROUP',\n          payload: group._id\n        });\n      } else {\n        console.error(\"Failed to cancel request:\", json.error);\n      }\n    } catch (error) {\n      console.error(\"Failed to cancel request:\", error);\n    }\n  };\n  const isMember = group.createdByID._id == user._id || group.membersID.findIndex(u => u._id == user._id) >= 0;\n  const isRequested = group.requestID.findIndex(u => u._id == user._id) >= 0;\n  const isPrivate = group.isPrivate == true;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"group-item\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"group-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"group-pic\",\n        src: `data:image/jpeg;base64, ${group.groupPic}`,\n        alt: \"Channel Picture\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"group-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: group.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"group-stats\",\n          children: [isPrivate ? \"Private\" : \"Public\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"members\",\n            children: [group.membersID.length + 1, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"material-symbols-outlined\",\n              children: \"group\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 56\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"trees-grown\",\n            children: [group.treesGrown, /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"tree\",\n              src: \"../tree.png\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 47\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), !isMember && !isPrivate && !isRequested && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"add-btn view\",\n      onClick: handleRequestJoin,\n      children: \"Request Join\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 57\n    }, this), !isMember && isRequested && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"delete-btn view\",\n      onClick: () => handleCancelRequest(user._id),\n      children: \"Cancel Request\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 42\n    }, this), isMember && /*#__PURE__*/_jsxDEV(Link, {\n      className: \"add-btn view\",\n      to: \"/group/\" + group._id,\n      children: \"View\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 26\n    }, this)]\n  }, group._id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n\n  // return (\n  //     <div className=\"group-item\" key={group._id}>\n  //     <h2>{group.name}</h2>\n  //     <p><b>Owner:</b> {group.createdByID.username}</p>\n  //     <div><b>Member:</b> {group.membersID.map((member) => (\n  //         <p><span key={member}>\n  //         {member.username}\n  //         <button className=\"remove-btn\" onClick={() => handleRemoveUserClick(group._id, member.username)}>Remove</button>\n  //         </span></p>\n  //     ))}\n  //     </div>\n  //     <p>\n  //     <b>Pending: </b> \n  //     {group.pendingID.map(member => member.username).join(', ')}\n  //     {group.requestID.length > 0 && group.pendingID.length > 0 && ', '}\n  //     {group.requestID.map(member => member.username).join(', ')}\n  //     </p>\n  //     <button className=\"add-btn\" onClick={() => handleAddUserClick(group._id)}>Add User</button>\n  //     {group.createdByID._id === user._id && (\n  //         <button className=\"delete-btn\" onClick={() => handleDeleteGroupClick(group._id, group.sectionID)}>Delete Group</button>\n  //     )}\n  //     <Link to={\"/group/\"+group._id}>View Group</Link>\n  //     </div>\n  // )\n};\n_s(GroupItem, \"J9leYk3aJUt91UZh8gDKFqssScM=\", false, function () {\n  return [useAuthContext, useGroupContext];\n});\n_c = GroupItem;\nexport default GroupItem;\nvar _c;\n$RefreshReg$(_c, \"GroupItem\");","map":{"version":3,"names":["Link","useAuthContext","useGroupContext","jsxDEV","_jsxDEV","GroupItem","group","_s","user","groups","dispatch","handleRequestJoin","response","fetch","_id","method","headers","token","json","ok","updatedGroup","structuredClone","requestID","type","payload","console","error","handleCancelRequest","filter","u","isMember","createdByID","membersID","findIndex","isRequested","isPrivate","className","children","src","groupPic","alt","fileName","_jsxFileName","lineNumber","columnNumber","name","length","treesGrown","onClick","to","_c","$RefreshReg$"],"sources":["C:/Users/Yi Tao/Documents/GitHub/WorkSync-Orbital/frontend/src/components/GroupItem.js"],"sourcesContent":["import { Link } from 'react-router-dom'\r\nimport { useAuthContext } from \"../hooks/useAuthContext\";\r\nimport { useGroupContext } from \"../hooks/useGroupContext\";\r\n\r\nconst GroupItem = ({ group }) => {\r\n    const { user } = useAuthContext();\r\n    const { groups, dispatch } = useGroupContext();\r\n    \r\n    // Function to handle request to join a group\r\n    const handleRequestJoin = async () => {\r\n        if (!user) return;\r\n\r\n        try {\r\n            const response = await fetch(`/api/group/join/${group._id}`, {\r\n                method: 'PATCH',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${user.token}`\r\n                },\r\n            });\r\n\r\n            const json = await response.json();\r\n\r\n            if (response.ok) {\r\n                const updatedGroup = structuredClone(group)\r\n                updatedGroup.requestID = [...updatedGroup.requestID, user]\r\n                dispatch({ type: 'UPDATE_GROUP', payload: updatedGroup });\r\n                dispatch({ type: 'CREATE_GROUP', payload: updatedGroup });\r\n            } else {\r\n                console.error(\"Failed to send request to join group:\", json.error);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to send request to join group:\", error);\r\n        }\r\n    };\r\n\r\n    // Function to cancel request to join a group\r\n    const handleCancelRequest = async () => {\r\n        if (!user) return;\r\n\r\n        try {\r\n            const response = await fetch(`/api/group/cancel/${group._id}`, {\r\n                method: 'PATCH',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${user.token}`\r\n                },\r\n            });\r\n\r\n            const json = await response.json();\r\n\r\n            if (response.ok) {\r\n                const updatedGroup = structuredClone(group)\r\n                updatedGroup.requestID = group.requestID.filter(u => u._id !== user._id)\r\n                dispatch({ type: 'UPDATE_GROUP', payload: updatedGroup });\r\n                dispatch({ type: 'DELETE_GROUP', payload: group._id });\r\n            } else {\r\n                console.error(\"Failed to cancel request:\", json.error);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to cancel request:\", error);\r\n        }\r\n    };\r\n\r\n    const isMember = group.createdByID._id == user._id || group.membersID.findIndex(u => u._id == user._id) >= 0\r\n    const isRequested = group.requestID.findIndex(u => u._id == user._id) >= 0\r\n    const isPrivate = group.isPrivate == true\r\n    \r\n    return (\r\n        <div className=\"group-item\" key={group._id}>\r\n            <div className=\"group-header\">\r\n                <img className=\"group-pic\"\r\n                    src= {`data:image/jpeg;base64, ${group.groupPic}`}  \r\n                    alt=\"Channel Picture\" \r\n                />\r\n                <div className=\"group-details\">\r\n                    <h2>{group.name}</h2>\r\n                    <div className=\"group-stats\">\r\n                        {isPrivate ? \"Private\" : \"Public\"}\r\n                        <div className=\"members\">\r\n                            {group.membersID.length+1} <span className=\"material-symbols-outlined\">group</span>\r\n                        </div>\r\n                        <div className=\"trees-grown\">\r\n                            {group.treesGrown}<img className=\"tree\" src=\"../tree.png\"></img>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {!isMember && !isPrivate && !isRequested && <button className=\"add-btn view\" onClick={handleRequestJoin}>Request Join</button>}\r\n            {!isMember && isRequested && <button className=\"delete-btn view\" onClick={() => handleCancelRequest(user._id)}>Cancel Request</button>}\r\n            {isMember && <Link className=\"add-btn view\" to={\"/group/\"+group._id}>View</Link>}\r\n        </div>\r\n    )\r\n    \r\n    // return (\r\n    //     <div className=\"group-item\" key={group._id}>\r\n    //     <h2>{group.name}</h2>\r\n    //     <p><b>Owner:</b> {group.createdByID.username}</p>\r\n    //     <div><b>Member:</b> {group.membersID.map((member) => (\r\n    //         <p><span key={member}>\r\n    //         {member.username}\r\n    //         <button className=\"remove-btn\" onClick={() => handleRemoveUserClick(group._id, member.username)}>Remove</button>\r\n    //         </span></p>\r\n    //     ))}\r\n    //     </div>\r\n    //     <p>\r\n    //     <b>Pending: </b> \r\n    //     {group.pendingID.map(member => member.username).join(', ')}\r\n    //     {group.requestID.length > 0 && group.pendingID.length > 0 && ', '}\r\n    //     {group.requestID.map(member => member.username).join(', ')}\r\n    //     </p>\r\n    //     <button className=\"add-btn\" onClick={() => handleAddUserClick(group._id)}>Add User</button>\r\n    //     {group.createdByID._id === user._id && (\r\n    //         <button className=\"delete-btn\" onClick={() => handleDeleteGroupClick(group._id, group.sectionID)}>Delete Group</button>\r\n    //     )}\r\n    //     <Link to={\"/group/\"+group._id}>View Group</Link>\r\n    //     </div>\r\n    // )\r\n}\r\n\r\nexport default GroupItem"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}