{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useSocketContext } from './useSocketContext';\nimport { useChatContext } from './useChatContext';\nexport const useListenMessages = channelId => {\n  _s();\n  const {\n    socket\n  } = useSocketContext();\n  const chatContext = useChatContext();\n  useEffect(() => {\n    socket === null || socket === void 0 ? void 0 : socket.on(\"newMessage\", newMessage => {\n      console.log(newMessage.channelId, channelId);\n      if (newMessage.channelId === channelId) chatContext.dispatch({\n        type: 'UPDATE_MESSAGES',\n        payload: newMessage\n      });\n    });\n    return () => {\n      socket === null || socket === void 0 ? void 0 : socket.off(\"newMessage\");\n    };\n  }, [socket, chatContext]);\n};\n_s(useListenMessages, \"NptOsWjeoL2fFqy22NXFDzjgCJI=\", false, function () {\n  return [useSocketContext, useChatContext];\n});","map":{"version":3,"names":["useState","useEffect","useSocketContext","useChatContext","useListenMessages","channelId","_s","socket","chatContext","on","newMessage","console","log","dispatch","type","payload","off"],"sources":["C:/Users/Yi Tao/Documents/GitHub/WorkSync-Orbital/frontend/src/hooks/useListenMessages.js"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { useSocketContext } from './useSocketContext'\r\nimport { useChatContext } from './useChatContext'\r\n\r\nexport const useListenMessages = ( channelId ) => {\r\n  const { socket } = useSocketContext()\r\n  const chatContext = useChatContext()\r\n\r\n  useEffect(() =>{\r\n    socket?.on(\"newMessage\", (newMessage) => {\r\n      console.log(newMessage.channelId, channelId)\r\n      if (newMessage.channelId === channelId) chatContext.dispatch({type: 'UPDATE_MESSAGES', payload: newMessage})\r\n    })\r\n\r\n    return () => {\r\n      socket?.off(\"newMessage\")\r\n    }\r\n  }, [socket, chatContext])\r\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,cAAc,QAAQ,kBAAkB;AAEjD,OAAO,MAAMC,iBAAiB,GAAKC,SAAS,IAAM;EAAAC,EAAA;EAChD,MAAM;IAAEC;EAAO,CAAC,GAAGL,gBAAgB,CAAC,CAAC;EACrC,MAAMM,WAAW,GAAGL,cAAc,CAAC,CAAC;EAEpCF,SAAS,CAAC,MAAK;IACbM,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEE,EAAE,CAAC,YAAY,EAAGC,UAAU,IAAK;MACvCC,OAAO,CAACC,GAAG,CAACF,UAAU,CAACL,SAAS,EAAEA,SAAS,CAAC;MAC5C,IAAIK,UAAU,CAACL,SAAS,KAAKA,SAAS,EAAEG,WAAW,CAACK,QAAQ,CAAC;QAACC,IAAI,EAAE,iBAAiB;QAAEC,OAAO,EAAEL;MAAU,CAAC,CAAC;IAC9G,CAAC,CAAC;IAEF,OAAO,MAAM;MACXH,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAES,GAAG,CAAC,YAAY,CAAC;IAC3B,CAAC;EACH,CAAC,EAAE,CAACT,MAAM,EAAEC,WAAW,CAAC,CAAC;AAC3B,CAAC;AAAAF,EAAA,CAdYF,iBAAiB;EAAA,QACTF,gBAAgB,EACfC,cAAc;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}