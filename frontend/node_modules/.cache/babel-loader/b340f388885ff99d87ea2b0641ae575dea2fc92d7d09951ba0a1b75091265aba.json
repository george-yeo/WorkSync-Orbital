{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yi Tao\\\\Documents\\\\GitHub\\\\WorkSync-Orbital\\\\frontend\\\\src\\\\components\\\\TaskForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useTaskContext } from '../hooks/useTaskContext';\nimport { useAuthContext } from '../hooks/useAuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TaskForm = ({\n  section,\n  closePopup,\n  editingTask,\n  isGroup,\n  group_id\n}) => {\n  _s();\n  const {\n    dispatch\n  } = useTaskContext();\n  const {\n    user\n  } = useAuthContext();\n  const [title, setTitle] = useState(editingTask ? editingTask.title : '');\n  const [description, setDescription] = useState(editingTask ? editingTask.description : '');\n  const [deadline, setDeadline] = useState(editingTask ? editingTask.deadline : null);\n  const [error, setError] = useState(null);\n  const [emptyFields, setEmptyFields] = useState([]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!user) {\n      setError('You must be logged in');\n      return;\n    }\n    let response, task;\n    if (editingTask) {\n      task = {\n        title,\n        description,\n        deadline,\n        isCompleted: editingTask.isCompleted,\n        sectionId: editingTask.sectionId\n      };\n      response = await fetch('/api/tasks/' + editingTask._id, {\n        method: 'PATCH',\n        body: JSON.stringify(task),\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user.token}`\n        }\n      });\n    } else {\n      // if (section.isGroup){\n      //   task = { title, description, deadline, isCompleted: false, sectionId: section._id, user_id: section.user_id }\n      //   response = await fetch('/api/tasks/createGroupTask', {\n      //     method: 'POST',\n      //     body: JSON.stringify(task),\n      //     headers: {\n      //       'Content-Type': 'application/json',\n      //       'Authorization': `Bearer ${user.token}`\n      //     }\n      //   });\n      // } else {\n      task = {\n        title,\n        description,\n        deadline,\n        isCompleted: false,\n        sectionId: section._id,\n        group_id\n      };\n      if (group_id) {\n        response = await fetch('/api/tasks/createGroupTask', {\n          method: 'POST',\n          body: JSON.stringify(task),\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${user.token}`\n          }\n        });\n      } else {\n        response = await fetch('/api/tasks', {\n          method: 'POST',\n          body: JSON.stringify(task),\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${user.token}`\n          }\n        });\n      }\n      // }\n    }\n    const json = await response.json();\n    if (!response.ok) {\n      setError(json.error);\n      setEmptyFields(json.emptyFields);\n    }\n    if (response.ok) {\n      setTitle('');\n      setDescription('');\n      setDeadline(null);\n      setError(null);\n      setEmptyFields([]);\n      dispatch({\n        type: editingTask ? 'UPDATE_TASK' : 'CREATE_TASK',\n        payload: json\n      });\n      closePopup();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"popup-form\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"close-btn\",\n        onClick: closePopup,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"create\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [editingTask && \"Edit Task\", !editingTask && \"Add a new Task\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"task-detail-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            onChange: e => setTitle(e.target.value),\n            value: title,\n            className: emptyFields.includes('title') ? 'error' : 'task-detail-form',\n            placeholder: \"Task name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            onChange: e => setDescription(e.target.value),\n            value: description,\n            placeholder: \"Description (Optional)\",\n            className: \"task-detail-form\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"task-detail-deadline\",\n            children: \"Deadline: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            onChange: e => setDeadline(e.target.value),\n            value: deadline,\n            defaultValue: deadline,\n            className: \"task-detail-form\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: [editingTask && \"Confirm Edit\", !editingTask && \"Add Task\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n_s(TaskForm, \"cqIMtBF/DexS7mAha2hC75STxHk=\", false, function () {\n  return [useTaskContext, useAuthContext];\n});\n_c = TaskForm;\nexport default TaskForm;\nvar _c;\n$RefreshReg$(_c, \"TaskForm\");","map":{"version":3,"names":["React","useState","useTaskContext","useAuthContext","jsxDEV","_jsxDEV","TaskForm","section","closePopup","editingTask","isGroup","group_id","_s","dispatch","user","title","setTitle","description","setDescription","deadline","setDeadline","error","setError","emptyFields","setEmptyFields","handleSubmit","e","preventDefault","response","task","isCompleted","sectionId","fetch","_id","method","body","JSON","stringify","headers","token","json","ok","type","payload","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","target","value","includes","placeholder","defaultValue","_c","$RefreshReg$"],"sources":["C:/Users/Yi Tao/Documents/GitHub/WorkSync-Orbital/frontend/src/components/TaskForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useTaskContext } from '../hooks/useTaskContext';\r\nimport { useAuthContext } from '../hooks/useAuthContext';\r\n\r\nconst TaskForm = ({ section, closePopup, editingTask, isGroup, group_id }) => {\r\n  const { dispatch } = useTaskContext();\r\n  const { user } = useAuthContext();\r\n\r\n  const [title, setTitle] = useState(editingTask ? editingTask.title : '');\r\n  const [description, setDescription] = useState(editingTask ? editingTask.description : '');\r\n  const [deadline, setDeadline] = useState(editingTask ? editingTask.deadline : null);\r\n  const [error, setError] = useState(null);\r\n  const [emptyFields, setEmptyFields] = useState([]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!user) {\r\n      setError('You must be logged in');\r\n      return;\r\n    }\r\n\r\n    let response, task;\r\n\r\n    if (editingTask) {\r\n      task = {\r\n        title,\r\n        description,\r\n        deadline,\r\n        isCompleted: editingTask.isCompleted,\r\n        sectionId: editingTask.sectionId\r\n      }\r\n      response = await fetch('/api/tasks/' + editingTask._id, {\r\n        method: 'PATCH',\r\n        body: JSON.stringify(task),\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${user.token}`\r\n        }\r\n      })\r\n    } else {\r\n      // if (section.isGroup){\r\n      //   task = { title, description, deadline, isCompleted: false, sectionId: section._id, user_id: section.user_id }\r\n      //   response = await fetch('/api/tasks/createGroupTask', {\r\n      //     method: 'POST',\r\n      //     body: JSON.stringify(task),\r\n      //     headers: {\r\n      //       'Content-Type': 'application/json',\r\n      //       'Authorization': `Bearer ${user.token}`\r\n      //     }\r\n      //   });\r\n      // } else {\r\n        task = { title, description, deadline, isCompleted: false, sectionId: section._id, group_id }\r\n\r\n        if (group_id) {\r\n          response = await fetch('/api/tasks/createGroupTask', {\r\n            method: 'POST',\r\n            body: JSON.stringify(task),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': `Bearer ${user.token}`\r\n            }\r\n          });\r\n        } else {\r\n          response = await fetch('/api/tasks', {\r\n            method: 'POST',\r\n            body: JSON.stringify(task),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': `Bearer ${user.token}`\r\n            }\r\n          });\r\n        }\r\n      // }\r\n    }\r\n\r\n    const json = await response.json();\r\n\r\n    if (!response.ok) {\r\n      setError(json.error);\r\n      setEmptyFields(json.emptyFields);\r\n    }\r\n    if (response.ok) {\r\n      setTitle('');\r\n      setDescription('');\r\n      setDeadline(null);\r\n      setError(null);\r\n      setEmptyFields([]);\r\n\r\n      dispatch({ type: editingTask ? 'UPDATE_TASK' : 'CREATE_TASK', payload: json });\r\n\r\n      closePopup();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"popup-form\">\r\n      <div className=\"popup-content\">\r\n        <span className=\"close-btn\" onClick={closePopup}>&times;</span>\r\n        <form className=\"create\" onSubmit={handleSubmit}>\r\n          <h3>{editingTask && \"Edit Task\"}{!editingTask && \"Add a new Task\"}</h3>\r\n          <div className=\"task-detail-box\">\r\n            <input\r\n              type=\"text\"\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              value={title}\r\n              className={emptyFields.includes('title') ? 'error' : 'task-detail-form'}\r\n              placeholder=\"Task name\"\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              value={description}\r\n              placeholder=\"Description (Optional)\"\r\n              className=\"task-detail-form\"\r\n            />\r\n            <label className=\"task-detail-deadline\">Deadline: </label>\r\n            <input\r\n              type=\"date\"\r\n              onChange={(e) => setDeadline(e.target.value)}\r\n              value={deadline}\r\n              defaultValue={deadline}\r\n              className=\"task-detail-form\"\r\n            />\r\n          </div>\r\n          <button>{editingTask && \"Confirm Edit\"}{!editingTask && \"Add Task\"}</button>\r\n          {error && <div className='error'>{error}</div>}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TaskForm;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,cAAc,QAAQ,yBAAyB;AACxD,SAASC,cAAc,QAAQ,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzD,MAAMC,QAAQ,GAAGA,CAAC;EAAEC,OAAO;EAAEC,UAAU;EAAEC,WAAW;EAAEC,OAAO;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC5E,MAAM;IAAEC;EAAS,CAAC,GAAGX,cAAc,CAAC,CAAC;EACrC,MAAM;IAAEY;EAAK,CAAC,GAAGX,cAAc,CAAC,CAAC;EAEjC,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAACQ,WAAW,GAAGA,WAAW,CAACM,KAAK,GAAG,EAAE,CAAC;EACxE,MAAM,CAACE,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAACQ,WAAW,GAAGA,WAAW,CAACQ,WAAW,GAAG,EAAE,CAAC;EAC1F,MAAM,CAACE,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAACQ,WAAW,GAAGA,WAAW,CAACU,QAAQ,GAAG,IAAI,CAAC;EACnF,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACsB,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAElD,MAAMwB,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAElB,IAAI,CAACb,IAAI,EAAE;MACTQ,QAAQ,CAAC,uBAAuB,CAAC;MACjC;IACF;IAEA,IAAIM,QAAQ,EAAEC,IAAI;IAElB,IAAIpB,WAAW,EAAE;MACfoB,IAAI,GAAG;QACLd,KAAK;QACLE,WAAW;QACXE,QAAQ;QACRW,WAAW,EAAErB,WAAW,CAACqB,WAAW;QACpCC,SAAS,EAAEtB,WAAW,CAACsB;MACzB,CAAC;MACDH,QAAQ,GAAG,MAAMI,KAAK,CAAC,aAAa,GAAGvB,WAAW,CAACwB,GAAG,EAAE;QACtDC,MAAM,EAAE,OAAO;QACfC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC;QAC1BS,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAG,UAASxB,IAAI,CAACyB,KAAM;QAC1C;MACF,CAAC,CAAC;IACJ,CAAC,MAAM;MACL;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACEV,IAAI,GAAG;QAAEd,KAAK;QAAEE,WAAW;QAAEE,QAAQ;QAAEW,WAAW,EAAE,KAAK;QAAEC,SAAS,EAAExB,OAAO,CAAC0B,GAAG;QAAEtB;MAAS,CAAC;MAE7F,IAAIA,QAAQ,EAAE;QACZiB,QAAQ,GAAG,MAAMI,KAAK,CAAC,4BAA4B,EAAE;UACnDE,MAAM,EAAE,MAAM;UACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC;UAC1BS,OAAO,EAAE;YACP,cAAc,EAAE,kBAAkB;YAClC,eAAe,EAAG,UAASxB,IAAI,CAACyB,KAAM;UACxC;QACF,CAAC,CAAC;MACJ,CAAC,MAAM;QACLX,QAAQ,GAAG,MAAMI,KAAK,CAAC,YAAY,EAAE;UACnCE,MAAM,EAAE,MAAM;UACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC;UAC1BS,OAAO,EAAE;YACP,cAAc,EAAE,kBAAkB;YAClC,eAAe,EAAG,UAASxB,IAAI,CAACyB,KAAM;UACxC;QACF,CAAC,CAAC;MACJ;MACF;IACF;IAEA,MAAMC,IAAI,GAAG,MAAMZ,QAAQ,CAACY,IAAI,CAAC,CAAC;IAElC,IAAI,CAACZ,QAAQ,CAACa,EAAE,EAAE;MAChBnB,QAAQ,CAACkB,IAAI,CAACnB,KAAK,CAAC;MACpBG,cAAc,CAACgB,IAAI,CAACjB,WAAW,CAAC;IAClC;IACA,IAAIK,QAAQ,CAACa,EAAE,EAAE;MACfzB,QAAQ,CAAC,EAAE,CAAC;MACZE,cAAc,CAAC,EAAE,CAAC;MAClBE,WAAW,CAAC,IAAI,CAAC;MACjBE,QAAQ,CAAC,IAAI,CAAC;MACdE,cAAc,CAAC,EAAE,CAAC;MAElBX,QAAQ,CAAC;QAAE6B,IAAI,EAAEjC,WAAW,GAAG,aAAa,GAAG,aAAa;QAAEkC,OAAO,EAAEH;MAAK,CAAC,CAAC;MAE9EhC,UAAU,CAAC,CAAC;IACd;EACF,CAAC;EAED,oBACEH,OAAA;IAAKuC,SAAS,EAAC,YAAY;IAAAC,QAAA,eACzBxC,OAAA;MAAKuC,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC5BxC,OAAA;QAAMuC,SAAS,EAAC,WAAW;QAACE,OAAO,EAAEtC,UAAW;QAAAqC,QAAA,EAAC;MAAO;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAC/D7C,OAAA;QAAMuC,SAAS,EAAC,QAAQ;QAACO,QAAQ,EAAE1B,YAAa;QAAAoB,QAAA,gBAC9CxC,OAAA;UAAAwC,QAAA,GAAKpC,WAAW,IAAI,WAAW,EAAE,CAACA,WAAW,IAAI,gBAAgB;QAAA;UAAAsC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACvE7C,OAAA;UAAKuC,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9BxC,OAAA;YACEqC,IAAI,EAAC,MAAM;YACXU,QAAQ,EAAG1B,CAAC,IAAKV,QAAQ,CAACU,CAAC,CAAC2B,MAAM,CAACC,KAAK,CAAE;YAC1CA,KAAK,EAAEvC,KAAM;YACb6B,SAAS,EAAErB,WAAW,CAACgC,QAAQ,CAAC,OAAO,CAAC,GAAG,OAAO,GAAG,kBAAmB;YACxEC,WAAW,EAAC;UAAW;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxB,CAAC,eACF7C,OAAA;YACEqC,IAAI,EAAC,MAAM;YACXU,QAAQ,EAAG1B,CAAC,IAAKR,cAAc,CAACQ,CAAC,CAAC2B,MAAM,CAACC,KAAK,CAAE;YAChDA,KAAK,EAAErC,WAAY;YACnBuC,WAAW,EAAC,wBAAwB;YACpCZ,SAAS,EAAC;UAAkB;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7B,CAAC,eACF7C,OAAA;YAAOuC,SAAS,EAAC,sBAAsB;YAAAC,QAAA,EAAC;UAAU;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC1D7C,OAAA;YACEqC,IAAI,EAAC,MAAM;YACXU,QAAQ,EAAG1B,CAAC,IAAKN,WAAW,CAACM,CAAC,CAAC2B,MAAM,CAACC,KAAK,CAAE;YAC7CA,KAAK,EAAEnC,QAAS;YAChBsC,YAAY,EAAEtC,QAAS;YACvByB,SAAS,EAAC;UAAkB;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7B,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eACN7C,OAAA;UAAAwC,QAAA,GAASpC,WAAW,IAAI,cAAc,EAAE,CAACA,WAAW,IAAI,UAAU;QAAA;UAAAsC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAS,CAAC,EAC3E7B,KAAK,iBAAIhB,OAAA;UAAKuC,SAAS,EAAC,OAAO;UAAAC,QAAA,EAAExB;QAAK;UAAA0B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1C,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACtC,EAAA,CA/HIN,QAAQ;EAAA,QACSJ,cAAc,EAClBC,cAAc;AAAA;AAAAuD,EAAA,GAF3BpD,QAAQ;AAiId,eAAeA,QAAQ;AAAC,IAAAoD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}